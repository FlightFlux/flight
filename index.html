<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Airline Staff Portal</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#0063c6">
    <meta name="description" content="Essential tools for airline staff - flight tracking, quick links, and more">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="AA Staff Portal">
    <meta name="application-name" content="AA Staff Portal">
    
    <!-- Manifest (Inline Data URI) -->
    <link rel="manifest" href="data:application/manifest+json,{&quot;name&quot;:&quot;Airline Staff Portal&quot;,&quot;short_name&quot;:&quot;AA Staff&quot;,&quot;description&quot;:&quot;Essential tools for airline staff&quot;,&quot;start_url&quot;:&quot;/index.html&quot;,&quot;display&quot;:&quot;standalone&quot;,&quot;background_color&quot;:&quot;#0063c6&quot;,&quot;theme_color&quot;:&quot;#0063c6&quot;,&quot;orientation&quot;:&quot;portrait-primary&quot;,&quot;icons&quot;:[{&quot;src&quot;:&quot;data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22%3E%3Ctext y=%22.9em%22 font-size=%2290%22%3E✈️%3C/text%3E%3C/svg%3E&quot;,&quot;sizes&quot;:&quot;192x192&quot;,&quot;type&quot;:&quot;image/svg+xml&quot;}]}">
    
    <!-- Icons -->
    <link rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAMAAAAKE/YAAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABFUExURUxpcQBjxgBjxgBjxgBjxgBjxgBjxgBjxgBjxgBjxgBjxgBjxgBjxgBjxgBjxjqL0XOm25vF6LjT7tHi89vo9vP3+jQoS0cAAAAKdFJOUwC9P0n//////4ArQaSHAAAFVklEQVR42u2c63abMBCFhYkvYGOb93/VWhqBJQFG2/Sf7cxZa1pIyuYbzQVptEejbvnOVzG///yVLDlQOVA5UDlQOVA5UDlQOVA5UDlQOVA5UDlQOVA5UDlQOVA5UDlQOVA5UDlQ3xc0j1xXzhuXdSCfbRnDt4C+UbPUlYuaJlXTLpfLhf5M7V/UOxQHMx4fG/puodrSqkttMWxwt9BoEOxtQ/8UNHK7g40baPCJNg39U9Afpm0nE7WY1ULjq7z4bUMfXdSoywxQrzb0zbSqgyZUOm5oPo7vX+ygcUeVQ2cW2urVQI/7qQx14I5+aUDXXTqcLDQqx6aNPEBv5fCdQZsR1I6hkTi20KwH6FE5eunwgB7H9xvoSTnwBG166P4MdDe+jzEIwDhoDnWAPjvoaXzrqO2G06ChHB50B30eNKOXtfG9sRQDja9RB2jUARodwwaafbaPxndYOXrwDR3Gg37FQTMHPQ7v6/b4Xjf2u3L0v4N+Ax2g4aFb6IU0jmX70T2/KofuoMMEeqoc0NFNo/o9vnUL4xN0gJ5VjvVtNFWmfW0c0bR9xNW/k3JU76CnyhE6P6b7HvpYkS6TdECnQc+Vw6Zxe/UX0JGD6M1VDts/Z+O7csqxUTncl1UzM75b6NfK8blyhC42Ht9bA51TOTaUY3KnK4et3s74HhaNVQ78uwfoluYDdBblfkIRdbFufE/KUcVBLyrHp8pRbcX3BvpcOXLiO1E5cqCxZjAPGrO+Vw7XwK5Hd+KiYVaNr/EdlMNVjkn98qDj45ud9c9Vju6D+C49tR0/0GrlcEf3JB1ZlcPVuGp8I75XlWNdOSbl2FaOXOi08c0QoAtUD38q+Qydpxx4qXlKVo5M6HB6oDq6B+mc+HYrx9aiYVo5DuJbuXzl8BXSPGh0NV3V3Lzc+YyTt2goUT+YUY580xA7t62ND1T14n20csRBLyuHDvGdAT1XDpwdTE2sG99T5QgXjRLlYM54KFSO5kLQG5WjGt8JAxw7NnrQY/D4/hk6bdGQXjT+Xzl84jtzyvEKdKZy5JuGStaPwsrBXOXYUI5Z5ZgqR96ikVI5CrYcuFPLcdA2vlaUo8ZoWHECnbho5CrHoRz0ZuVwE3mJ+O7HdxnoROUYJpXDVeO6mnRjp9D6jc5UGnT+ohHGdy50rnLMlKMkdKZyRKCTs86t8V1eOfzlTkl8T5VjOsFSlYMVVI7TTei1yqFtfB+BzlOOpTROLRoB+gh0nnLMKsfR+C5YOQ5A2x4a2pGsHLPI2KrRG8rh1g9VOUoqx9vKsaocJZUjfcrxb+jTKoeLbyPpHKGV41Dl2K4c85RjVTlOqxxHobOUY2F8Hy0cx5XjoHIsKMdUOSTlG6uHE6BXKsdmfK9XDreJpSYtdAr0eJJlTTkixnekchxXjlnlCCfYJZRjXjlAHaNOUA6I4HUztg9UDjEcRGcrh6ocRys0KkfR+N6qHIdMQ7PKEYePquuPQc+VI055rHKcVzlmJ1hmleNw5dhWDqcckxFQOeJJsKYcx05gzivH+fEdqRxRk54qR+XiuzZ0rnKcVjni2/hWzlAOZvbGiXKcVjni0KgcrBzRUShRDmFnfG8px3nl2KwccWg5vg/dZkFnKEfpytFExvdSOcaEKFU56qrKgU5Rjvj4TlGOwpXDHK0cSeM7XTnyKseacoQbMV3uolG6cvwKelbulKocpU9g1u/SfjG6S1YOvVnjKz+lK8e38Z88mFUOedVnQWrjL4cVhtaLpJuqVQj6yC+JFP0pkaI/tlL0526K/mCQoj9tpOiPNyn6E1iK/liYoj+rpugPlv0FLbCwJ/8+G/MAAAAASUVORK5CYII=">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>✈️</text></svg>">
    
    <!-- External CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Inline CSS -->
    <style>
        :root {
            --primary-color: #0063c6;
            --primary-dark: #004d9e;
            --primary-light: #e6f0ff;
            --accent-color: #e40046;
            --accent-dark: #b80039;
            --text-color: #333333;
            --background-color: #f8fafc;
            --card-color: #ffffff;
            --border-radius: 12px;
            --box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --transition: all 0.2s ease;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
        }

        /* Dark Mode Variables */
        .dark-mode {
            --text-color: #f1f5f9;
            --background-color: #0f172a;
            --card-color: #1e293b;
            --box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
            --primary-light: #1a365d;
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            padding: env(safe-area-inset-top, 10px) env(safe-area-inset-right, 10px) env(safe-area-inset-bottom, 10px) env(safe-area-inset-left, 10px);
            max-width: 100%;
            overflow-x: hidden;
            min-height: 100vh;
            transition: background-color 0.3s ease;
        }

        .container {
            max-width: 540px;
            margin: 0 auto;
            transition: all 0.3s ease;
        }

        /* Header Styles */
        .header-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .logo-container {
            display: flex;
            align-items: center;
        }

        .logo-text {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary-color);
            letter-spacing: -0.5px;
        }

        .logo-icon {
            color: var(--accent-color);
            margin-right: 5px;
            font-size: 1.2rem;
        }

        /* Toggle Switches */
        .toggle-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .toggle-group {
            display: flex;
            align-items: center;
        }

        .toggle-label {
            font-size: 0.7rem;
            margin-left: 4px;
            color: var(--text-color);
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 40px;
            height: 20px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 3px;
            bottom: 2px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--accent-color);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(18px);
        }

        /* Time Display */
        .time-display {
            background-color: var(--card-color);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 12px;
            margin-bottom: 12px;
            border: 1px solid rgba(0, 99, 198, 0.08);
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
        }

        .time-block {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .time-block.utc {
            align-items: flex-end;
        }

        .time-label {
            font-size: 0.7rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 2px;
        }

        .time-value {
            font-weight: 500;
        }

        /* Cards */
        .mini-card, .card {
            background-color: var(--card-color);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            border: 1px solid rgba(0, 99, 198, 0.08);
            transition: var(--transition);
        }

        .mini-card {
            padding: 12px;
            margin-bottom: 12px;
        }

        .card {
            padding: 16px;
            margin-bottom: 16px;
        }

        .mini-title {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
        }

        .mini-title i {
            margin-right: 7px;
            font-size: 0.8rem;
            color: var(--accent-color);
        }

        h2 {
            font-size: 1.1rem;
            margin-bottom: 12px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            font-weight: 600;
        }

        h2 i {
            margin-right: 8px;
            color: var(--accent-color);
        }

        /* Forms */
        .compact-form {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .input-group {
            display: flex;
            flex: 1;
        }

        .airline-select {
            width: 70px;
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
            border-right: none;
        }

        .input-group input {
            border-top-left-radius: 0;
            border-bottom-left-radius: 0;
            border-left: none;
        }

        .search-row {
            display: flex;
            align-items: center;
            margin-top: 6px;
        }

        .adv-search-link {
            font-size: 0.75rem;
            color: var(--primary-color);
            text-decoration: none;
            display: flex;
            align-items: center;
            margin-left: auto;
        }

        .adv-search-link i {
            margin-right: 3px;
            font-size: 0.7rem;
        }

        .adv-search-link:hover {
            text-decoration: underline;
        }

        /* Form Elements */
        input, select, button {
            padding: 8px 12px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 0.85rem;
            transition: var(--transition);
        }

        input, select {
            background-color: #f8fafc;
            color: #1e293b;
        }

        .dark-mode input, .dark-mode select {
            background-color: #334155;
            color: white;
            border-color: #475569;
        }

        .compact-input {
            width: 100%;
            min-width: 0;
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(0, 99, 198, 0.1);
        }

        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            white-space: nowrap;
            min-width: 50px;
        }

        button i {
            margin-right: 4px;
        }

        button:hover, button:active {
            background-color: var(--primary-dark);
        }

        /* Quick Links */
        .quick-links {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }

        .link-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: var(--primary-light);
            color: var(--primary-color);
            text-decoration: none;
            padding: 12px 5px;
            border-radius: var(--border-radius);
            text-align: center;
            font-size: 0.8rem;
            font-weight: 500;
            transition: var(--transition);
            height: 100%;
            border: 1px solid rgba(0, 99, 198, 0.1);
        }

        .link-item i {
            font-size: 1.3rem;
            margin-bottom: 6px;
        }

        .link-item:hover, .link-item:active {
            background-color: var(--primary-color);
            color: white;
        }

        .dark-mode .link-item {
            border: 1px solid rgba(255, 255, 255, 0.05);
            background-color: #1a365d;
        }

        /* Result Containers */
        .result-container {
            margin-top: 10px;
            font-size: 0.85rem;
        }

        /* Offline Indicator */
        .offline-indicator {
            background-color: var(--warning-color);
            color: white;
            padding: 8px 12px;
            border-radius: var(--border-radius);
            margin-bottom: 12px;
            font-size: 0.8rem;
            display: none;
            align-items: center;
            justify-content: center;
        }

        .offline-indicator i {
            margin-right: 5px;
        }

        .offline .offline-indicator {
            display: flex;
        }

        /* Footer */
        .footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 16px;
            color: #64748b;
            font-size: 0.8rem;
        }

        .update-badge {
            background-color: var(--accent-color);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            cursor: pointer;
        }

        .hidden {
            display: none;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: var(--card-color);
            padding: 20px;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 400px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
        }

        h3 {
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        .form-group input, .form-group select {
            width: 100%;
        }

        .btn-primary {
            width: 100%;
            padding: 10px;
            font-weight: 600;
        }

        /* Small screen mode - only hides extras, doesn't change width */
        .small-screen-mode .container {
            height: auto;
            overflow-y: visible;
            border: none;
            border-radius: 0;
            padding: 10px;
        }

        /* Hide everything except essentials in small screen mode */
        .small-screen-mode .card,
        .small-screen-mode .footer {
            display: none !important;
        }

        /* Keep normal spacing for the visible elements */
        .small-screen-mode .time-display {
            margin-bottom: 10px;
        }

        .small-screen-mode .mini-card {
            margin-bottom: 10px;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }

        /* Media Queries */
        @media (max-width: 480px) {
            .quick-links {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Notification */
        .notification {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: white;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1000;
            max-width: 80%;
            text-align: center;
        }

        .notification.show {
            opacity: 1;
        }

        .notification.success {
            background-color: var(--success-color);
        }

        .notification.error {
            background-color: var(--error-color);
        }

        .notification.warning {
            background-color: var(--warning-color);
        }

        .notification.info {
            background-color: var(--primary-color);
        }

        /* Airport Info Styles */
        .airport-info {
            font-size: 0.85rem;
            line-height: 1.4;
        }

        .airport-info p {
            margin-bottom: 6px;
        }

        .action-links {
            display: flex;
            gap: 12px;
            margin-top: 8px;
        }

        .action-links a {
            color: var(--primary-color);
            text-decoration: none;
            font-size: 0.8rem;
            font-weight: 500;
            display: flex;
            align-items: center;
        }

        .action-links a i {
            margin-right: 4px;
        }

        .action-links a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header with Toggles -->
        <div class="header-row">
            <div class="logo-container">
                <i class="fas fa-plane logo-icon"></i>
                <div class="logo-text">Airline Staff Portal</div>
            </div>
            <div class="toggle-container">
                <div class="toggle-group">
                    <label class="toggle-switch" title="Small Screen Mode">
                        <input type="checkbox" id="small-screen-toggle">
                        <span class="toggle-slider"></span>
                    </label>
                    <span class="toggle-label">3.6"</span>
                </div>
                
                <div class="toggle-group">
                    <label class="toggle-switch" title="Dark Mode">
                        <input type="checkbox" id="dark-mode-toggle">
                        <span class="toggle-slider"></span>
                    </label>
                    <span class="toggle-label">Dark</span>
                </div>
            </div>
        </div>

        <!-- Time Display -->
        <div class="time-display">
            <div class="time-block local">
                <div class="time-label">LOCAL</div>
                <div class="time-value" id="local-time"></div>
                <div class="time-value" id="local-date"></div>
            </div>
            <div class="time-block utc">
                <div class="time-label">UTC</div>
                <div class="time-value" id="utc-time"></div>
                <div class="time-value" id="utc-date"></div>
            </div>
        </div>

        <!-- Offline Mode Indicator -->
        <div id="offline-indicator" class="offline-indicator">
            <i class="fas fa-wifi-slash"></i> Offline Mode - Some features may not be available
        </div>

        <!-- Condensed Flight Tracker -->
        <div class="mini-card">
            <div class="mini-title"><i class="fas fa-plane-departure"></i>Track Flight</div>
            <form id="flight-tracker-form" class="compact-form">
                <div class="input-group">
                    <select id="airline-select" class="airline-select">
                        <option value="AAL">AA</option>
                        <option value="DAL">DL</option>
                        <option value="UAL">UA</option>
                        <option value="SWA">WN</option>
                    </select>
                    <input type="number" id="flight-number" class="compact-input" placeholder="Flight #" pattern="[0-9]*" inputmode="numeric">
                </div>
                <select id="tracking-service">
                    <option value="flightaware">FA</option>
                    <option value="flightradar24">FR24</option>
                </select>
                <button type="submit" aria-label="Track Flight"><i class="fas fa-search"></i>Go</button>
            </form>
        </div>

        <!-- Baggage Tracker -->
        <div class="mini-card">
            <div class="mini-title"><i class="fas fa-suitcase"></i>Baggage Lookup</div>
            <form id="baggage-lookup-form" class="compact-form">
                <input type="text" id="baggage-tag" class="compact-input" placeholder="Bag Tag #" pattern="[0-9]*" inputmode="numeric">
                <button type="submit" aria-label="Search Baggage"><i class="fas fa-search"></i>Go</button>
            </form>
        </div>

        <!-- Condensed Search -->
        <div class="mini-card">
            <div class="mini-title"><i class="fas fa-search"></i>Search Google</div>
            <form id="google-search-form">
                <div class="compact-form">
                    <input type="text" name="q" placeholder="Search query..." id="google-search-box" class="compact-input" autocomplete="off">
                    <button type="submit" aria-label="Search Google"><i class="fas fa-arrow-right"></i>Go</button>
                </div>
                <div class="search-row">
                    <a href="https://www.google.com/advanced_search" target="_blank" class="adv-search-link">
                        <i class="fas fa-cog"></i>Advanced
                    </a>
                </div>
            </form>
        </div>

        <!-- Quick Links -->
        <div class="card">
            <h2><i class="fas fa-link"></i>Quick Links</h2>
            <div class="quick-links">
                <a href="https://webmail.aa.com" class="link-item" target="_blank">
                    <i class="fas fa-envelope"></i>
                    <span>AA Email</span>
                </a>
                <a href="https://teams.microsoft.com/v2/" class="link-item" target="_blank">
                    <i class="fas fa-users"></i>
                    <span>Teams</span>
                </a>
                <a href="https://spteam.aa.com/sites/D5B" class="link-item" target="_blank">
                    <i class="fas fa-building"></i>
                    <span>ABR DFW</span>
                </a>
                <a href="https://airportal.aa.com/AirPortalWeb/HTML/dashboard/dashboard.html" class="link-item" target="_blank">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>AirPortal</span>
                </a>
                <a href="https://prime.app.bags.aa.com/web/" class="link-item" target="_blank">
                    <i class="fas fa-suitcase"></i>
                    <span>PRIME</span>
                </a>
                <a href="https://hcchold.replit.app/" class="link-item" target="_blank">
                    <i class="fas fa-clock"></i>
                    <span>HCC Tool</span>
                </a>
                <a href="https://newjetnet.aa.com/" class="link-item" target="_blank">
                    <i class="fas fa-id-badge"></i>
                    <span>Jetnet</span>
                </a>
                <a href="https://tools.crew.aa.com/losa/" class="link-item" target="_blank">
                    <i class="fas fa-shield-alt"></i>
                    <span>LOSA</span>
                </a>
                <a href="#" class="link-item" id="add-link-btn">
                    <i class="fas fa-plus"></i>
                    <span>Add Link</span>
                </a>
            </div>
        </div>

        <!-- Airport Info Card -->
        <div class="card">
            <h2><i class="fas fa-info-circle"></i>Airport Info</h2>
            <form id="airport-info-form" class="compact-form">
                <input type="text" id="airport-code" class="compact-input" placeholder="Airport Code (e.g. DFW)" maxlength="3">
                <button type="submit" aria-label="Get Airport Info"><i class="fas fa-search"></i>Go</button>
            </form>
            <div id="airport-info-result" class="result-container"></div>
        </div>

        <!-- App Status -->
        <div class="footer">
            <span>Airline Staff Portal • v1.2.5</span>
            <span id="update-available" class="update-badge hidden">Update Available</span>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notification" class="notification"></div>

    <!-- Modal for adding custom links -->
    <div id="add-link-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>Add Custom Link</h3>
            <form id="add-link-form">
                <div class="form-group">
                    <label for="link-name">Name:</label>
                    <input type="text" id="link-name" required>
                </div>
                <div class="form-group">
                    <label for="link-url">URL:</label>
                    <input type="url" id="link-url" required placeholder="https://">
                </div>
                <div class="form-group">
                    <label for="link-icon">Icon:</label>
                    <select id="link-icon">
                        <option value="fa-link">Link</option>
                        <option value="fa-plane">Plane</option>
                        <option value="fa-suitcase">Suitcase</option>
                        <option value="fa-clipboard">Clipboard</option>
                        <option value="fa-calendar">Calendar</option>
                        <option value="fa-user">User</option>
                        <option value="fa-map">Map</option>
                        <option value="fa-cog">Settings</option>
                    </select>
                </div>
                <button type="submit" class="btn-primary">Add Link</button>
            </form>
        </div>
    </div>

    <!-- Inline JavaScript -->
    <script>
        // DOM elements
        const localTimeElement = document.getElementById('local-time');
        const localDateElement = document.getElementById('local-date');
        const utcTimeElement = document.getElementById('utc-time');
        const utcDateElement = document.getElementById('utc-date');
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        const smallScreenToggle = document.getElementById('small-screen-toggle');
        const flightTrackerForm = document.getElementById('flight-tracker-form');
        const baggageLookupForm = document.getElementById('baggage-lookup-form');
        const googleSearchForm = document.getElementById('google-search-form');
        const airportInfoForm = document.getElementById('airport-info-form');
        const airportInfoResult = document.getElementById('airport-info-result');
        const addLinkBtn = document.getElementById('add-link-btn');
        const addLinkModal = document.getElementById('add-link-modal');
        const closeModalBtn = document.querySelector('.close-modal');
        const addLinkForm = document.getElementById('add-link-form');
        const notificationElement = document.getElementById('notification');

        // Custom links storage key
        const CUSTOM_LINKS_KEY = 'airline-staff-portal-custom-links';
        const APP_VERSION = '1.2.5';
        const CACHE_VERSION = 'airline-staff-portal-v1.2.5';

        // Initialize application
        function initApp() {
            // Initialize clock
            updateTime();
            setInterval(updateTime, 1000);
            
            // Load saved preferences
            loadSavedPreferences();
            
            // Load custom links
            loadCustomLinks();
            
            // Initialize listeners
            initEventListeners();
            
            // Check network status and set up listeners
            updateOnlineStatus();
            window.addEventListener('online', updateOnlineStatus);
            window.addEventListener('offline', updateOnlineStatus);

            // Register service worker
            registerServiceWorker();

            // Process URL parameters (for shortcuts)
            processUrlParams();
        }

        // Process URL parameters
        function processUrlParams() {
            const urlParams = new URLSearchParams(window.location.search);
            const action = urlParams.get('action');
            
            if (action === 'track_flight') {
                document.getElementById('flight-number').focus();
            } else if (action === 'baggage_lookup') {
                document.getElementById('baggage-tag').focus();
            }
        }

        // Update time display
        function updateTime() {
            const now = new Date();
            
            // Format local time
            localTimeElement.textContent = now.toLocaleTimeString('en-US', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            localDateElement.textContent = now.toLocaleDateString('en-US', { 
                month: 'short', 
                day: 'numeric' 
            });
            
            // Format UTC time
            utcTimeElement.textContent = now.toLocaleTimeString('en-US', { 
                hour: '2-digit', 
                minute: '2-digit', 
                timeZone: 'UTC' 
            });
            
            utcDateElement.textContent = now.toLocaleDateString('en-US', { 
                month: 'short', 
                day: 'numeric', 
                timeZone: 'UTC' 
            });
        }

        // Load user preferences
        function loadSavedPreferences() {
            const darkMode = localStorage.getItem('darkMode') === 'true';
            const smallScreenMode = localStorage.getItem('smallScreenMode') === 'true';
            
            if (darkMode) {
                darkModeToggle.checked = true;
                document.documentElement.classList.add('dark-mode');
            }
            
            if (smallScreenMode) {
                smallScreenToggle.checked = true;
                document.body.classList.add('small-screen-mode');
            }

            // Check if we need to update if version has changed
            const savedVersion = localStorage.getItem('appVersion');
            if (savedVersion !== APP_VERSION) {
                localStorage.setItem('appVersion', APP_VERSION);
                if (savedVersion) {
                    // Show update notification only if this is not first install
                    showNotification(`Updated to version ${APP_VERSION}`, 'info');
                }
            }
        }

        // Initialize event listeners
        function initEventListeners() {
            // Dark mode toggle
            darkModeToggle.addEventListener('change', function() {
                document.documentElement.classList.toggle('dark-mode');
                localStorage.setItem('darkMode', darkModeToggle.checked);
            });

            // Small screen toggle
            smallScreenToggle.addEventListener('change', function() {
                document.body.classList.toggle('small-screen-mode');
                localStorage.setItem('smallScreenMode', smallScreenToggle.checked);
            });

            // Flight tracker form
            flightTrackerForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const flightNumber = document.getElementById('flight-number').value;
                const airlineCode = document.getElementById('airline-select').value;
                const trackingService = document.getElementById('tracking-service').value;
                
                if (!flightNumber) {
                    showNotification('Please enter a flight number', 'error');
                    return;
                }
                
                let url;
                if (trackingService === 'flightaware') {
                    url = `https://flightaware.com/live/flight/${airlineCode}${flightNumber}`;
                } else {
                    url = `https://www.flightradar24.com/data/flights/${airlineCode.toLowerCase()}${flightNumber}`;
                }
                
                window.open(url, '_blank');
                showNotification('Opening flight tracker', 'success');
            });

            // Baggage lookup form
            baggageLookupForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const bagTagNumber = document.getElementById('baggage-tag').value;
                
                if (!bagTagNumber) {
                    showNotification('Please enter a bag tag number', 'error');
                    return;
                }
                
                // In a real environment, this would point to your internal baggage system
                window.open(`https://prime.app.bags.aa.com/web/?bagtag=${bagTagNumber}`, '_blank');
                showNotification('Opening baggage search', 'success');
            });

            // Google search form
            googleSearchForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const searchQuery = document.getElementById('google-search-box').value;
                
                if (!searchQuery) {
                    showNotification('Please enter a search query', 'error');
                    return;
                }
                
                window.open(`https://www.google.com/search?q=${encodeURIComponent(searchQuery)}`, '_blank');
            });

            // Airport info form
            airportInfoForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const airportCode = document.getElementById('airport-code').value.toUpperCase();
                
                if (!airportCode || airportCode.length !== 3) {
                    showNotification('Please enter a valid 3-letter airport code', 'error');
                    return;
                }
                
                fetchAirportInfo(airportCode);
            });

            // Add link button
            addLinkBtn.addEventListener('click', function(e) {
                e.preventDefault();
                openAddLinkModal();
            });

            // Close modal
            closeModalBtn.addEventListener('click', closeAddLinkModal);
            window.addEventListener('click', function(e) {
                if (e.target === addLinkModal) {
                    closeAddLinkModal();
                }
            });

            // Add link form
            addLinkForm.addEventListener('submit', function(e) {
                e.preventDefault();
                addCustomLink();
            });

            // Update badge click handler
            document.getElementById('update-available').addEventListener('click', function() {
                // Force reload from server, not cache
                window.location.reload(true);
            });
        }

        // Fetch airport information
        async function fetchAirportInfo(airportCode) {
            airportInfoResult.innerHTML = '<div class="loading"><i class="fas fa-spinner fa-spin"></i> Loading...</div>';
            
            try {
                // In a real app, you would fetch from an API
                // For demo purposes, we'll use some hardcoded data
                const airports = {
                    'DFW': {
                        name: 'Dallas/Fort Worth International Airport',
                        city: 'Dallas',
                        country: 'United States',
                        terminals: 5,
                        timezone: 'America/Chicago'
                    },
                    'JFK': {
                        name: 'John F. Kennedy International Airport',
                        city: 'New York',
                        country: 'United States',
                        terminals: 6,
                        timezone: 'America/New_York'
                    },
                    'LAX': {
                        name: 'Los Angeles International Airport',
                        city: 'Los Angeles',
                        country: 'United States',
                        terminals: 9,
                        timezone: 'America/Los_Angeles'
                    },
                    'ORD': {
                        name: "O'Hare International Airport",
                        city: 'Chicago',
                        country: 'United States',
                        terminals: 4,
                        timezone: 'America/Chicago'
                    },
                    'LHR': {
                        name: 'London Heathrow Airport',
                        city: 'London',
                        country: 'United Kingdom',
                        terminals: 5,
                        timezone: 'Europe/London'
                    }
                };
                
                // Simulate network delay
                await new Promise(resolve => setTimeout(resolve, 500));
                
                if (airports[airportCode]) {
                    const airport = airports[airportCode];
                    airportInfoResult.innerHTML = `
                        <div class="airport-info">
                            <p><strong>${airport.name} (${airportCode})</strong></p>
                            <p>${airport.city}, ${airport.country}</p>
                            <p>Terminals: ${airport.terminals}</p>
                            <p>Timezone: ${airport.timezone}</p>
                            <div class="action-links">
                                <a href="https://flightaware.com/live/airport/${airportCode}" target="_blank">
                                    <i class="fas fa-plane"></i> Flight Status
                                </a>
                                <a href="https://www.google.com/maps/search/${encodeURIComponent(airport.name)}" target="_blank">
                                    <i class="fas fa-map-marker-alt"></i> Map
                                </a>
                            </div>
                        </div>
                    `;
                } else {
                    airportInfoResult.innerHTML = `
                        <div class="error-message">
                            <p>No information found for airport code: ${airportCode}</p>
                        </div>
                    `;
                    showNotification(`No data for ${airportCode}`, 'warning');
                }
            } catch (error) {
                console.error('Error fetching airport info:', error);
                airportInfoResult.innerHTML = `
                    <div class="error-message">
                        <p>Error loading airport information. Please try again.</p>
                    </div>
                `;
                showNotification('Error loading airport data', 'error');
            }
        }

        // Load custom links from localStorage
        function loadCustomLinks() {
            try {
                const customLinks = JSON.parse(localStorage.getItem(CUSTOM_LINKS_KEY)) || [];
                
                // Add custom links to the grid before the "Add Link" button
                customLinks.forEach(link => {
                    addLinkToDOM(link);
                });
            } catch (error) {
                console.error('Error loading custom links:', error);
                showNotification('Error loading your custom links', 'error');
            }
        }

        // Add a custom link to the DOM
        function addLinkToDOM(link) {
            const linkElement = document.createElement('a');
            linkElement.href = link.url;
            linkElement.className = 'link-item';
            linkElement.target = '_blank';
            linkElement.dataset.id = link.id;
            
            linkElement.innerHTML = `
                <i class="fas ${link.icon}"></i>
                <span>${link.name}</span>
            `;
            
            // Add a delete option that shows on long press or right-click
            linkElement.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                if (confirm(`Remove "${link.name}" from your quick links?`)) {
                    removeCustomLink(link.id);
                    linkElement.remove();
                }
            });
            
            // Add the link before the "Add Link" button
            const quickLinksContainer = document.querySelector('.quick-links');
            quickLinksContainer.insertBefore(linkElement, addLinkBtn);
        }

        // Open the add link modal
        function openAddLinkModal() {
            addLinkModal.style.display = 'flex';
            document.getElementById('link-name').focus();
        }

        // Close the add link modal
        function closeAddLinkModal() {
            addLinkModal.style.display = 'none';
            addLinkForm.reset();
        }

        // Add a custom link
        function addCustomLink() {
            const name = document.getElementById('link-name').value.trim();
            const url = document.getElementById('link-url').value.trim();
            const icon = document.getElementById('link-icon').value;
            
            if (!name || !url) {
                showNotification('Please fill out all fields', 'error');
                return;
            }
            
            // Validate URL format
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                showNotification('URL must start with http:// or https://', 'error');
                return;
            }
            
            // Create link object
            const newLink = {
                id: Date.now().toString(),
                name,
                url,
                icon
            };
            
            // Save to localStorage
            try {
                const customLinks = JSON.parse(localStorage.getItem(CUSTOM_LINKS_KEY)) || [];
                customLinks.push(newLink);
                localStorage.setItem(CUSTOM_LINKS_KEY, JSON.stringify(customLinks));
                
                // Add to DOM
                addLinkToDOM(newLink);
                
                // Close modal
                closeAddLinkModal();
                
                showNotification('Link added successfully', 'success');
            } catch (error) {
                console.error('Error saving custom link:', error);
                showNotification('Error saving link', 'error');
            }
        }

        // Remove a custom link
        function removeCustomLink(id) {
            try {
                const customLinks = JSON.parse(localStorage.getItem(CUSTOM_LINKS_KEY)) || [];
                const updatedLinks = customLinks.filter(link => link.id !== id);
                localStorage.setItem(CUSTOM_LINKS_KEY, JSON.stringify(updatedLinks));
                
                showNotification('Link removed', 'success');
            } catch (error) {
                console.error('Error removing custom link:', error);
                showNotification('Error removing link', 'error');
            }
        }

        // Update online status
        function updateOnlineStatus() {
            if (navigator.onLine) {
                document.body.classList.remove('offline');
                // If coming back online, check if we need to sync
                if (window.serviceWorkerRegistration && navigator.serviceWorker.controller) {
                    navigator.serviceWorker.controller.postMessage({
                        type: 'ONLINE_AGAIN'
                    });
                }
            } else {
                document.body.classList.add('offline');
                showNotification('You are now offline. Some features may be limited.', 'warning');
            }
        }

        // Show notification
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = 'notification';
            notification.classList.add(type);
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Register service worker
        function registerServiceWorker() {
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                    // Create an inline service worker with the content below
                    const swContent = `
                        // Service Worker for Airline Staff Portal PWA
                        const CACHE_NAME = '${CACHE_VERSION}';
                        const RUNTIME_CACHE = 'runtime-cache';

                        // Installation event - cache essential assets
                        self.addEventListener('install', event => {
                            event.waitUntil(
                                caches.open(CACHE_NAME)
                                    .then(cache => {
                                        // Cache the main HTML document
                                        return cache.add('/');
                                    })
                                    .then(() => self.skipWaiting())
                            );
                        });

                        // Activation event - clean up old caches
                        self.addEventListener('activate', event => {
                            const currentCaches = [CACHE_NAME, RUNTIME_CACHE];
                            event.waitUntil(
                                caches.keys().then(cacheNames => {
                                    return cacheNames.filter(cacheName => !currentCaches.includes(cacheName));
                                }).then(cachesToDelete => {
                                    return Promise.all(cachesToDelete.map(cacheToDelete => {
                                        return caches.delete(cacheToDelete);
                                    }));
                                }).then(() => self.clients.claim())
                            );
                        });

                        // Fetch event - serve from cache or network with cache fallback
                        self.addEventListener('fetch', event => {
                            // Skip cross-origin requests
                            if (!event.request.url.startsWith(self.location.origin) && 
                                !event.request.url.includes('cdnjs.cloudflare.com')) {
                                return;
                            }
                            
                            event.respondWith(
                                caches.match(event.request).then(cachedResponse => {
                                    if (cachedResponse) {
                                        // Return cached response
                                        return cachedResponse;
                                    }

                                    return caches.open(RUNTIME_CACHE).then(cache => {
                                        return fetch(event.request)
                                            .then(response => {
                                                // Cache valid responses
                                                if (response.status === 200 && 
                                                    !event.request.url.includes('google.com') && 
                                                    !event.request.url.includes('flightaware.com') && 
                                                    !event.request.url.includes('flightradar24.com')) {
                                                    
                                                    // Clone the response as it can only be consumed once
                                                    cache.put(event.request, response.clone());
                                                }
                                                return response;
                                            })
                                            .catch(() => {
                                                // For navigation requests, return the offline HTML
                                                if (event.request.mode === 'navigate') {
                                                    return caches.match('/');
                                                }
                                                
                                                // Otherwise, just indicate failure
                                                return new Response('Network error happened', {
                                                    status: 408,
                                                    headers: { 'Content-Type': 'text/plain' }
                                                });
                                            });
                                    });
                                })
                            );
                        });

                        // Handle messages from the main thread
                        self.addEventListener('message', event => {
                            if (event.data && event.data.action === 'skipWaiting') {
                                self.skipWaiting();
                            }
                        });
                    `;
                    
                    // Create a Blob from the service worker content
                    const swBlob = new Blob([swContent], {type: 'text/javascript'});
                    
                    // Create a URL for the Blob
                    const swBlobUrl = URL.createObjectURL(swBlob);
                    
                    // Register the service worker using the Blob URL
                    navigator.serviceWorker.register(swBlobUrl)
                        .then(registration => {
                            console.log('Service Worker registered with scope:', registration.scope);
                            window.serviceWorkerRegistration = registration;
                            
                            // Check for updates
                            registration.addEventListener('updatefound', () => {
                                const newWorker = registration.installing;
                                document.getElementById('update-available').classList.remove('hidden');
                            });
                        })
                        .catch(error => {
                            console.error('Service Worker registration failed:', error);
                        });
                });
            }
        }

        // Initialize the app when the DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>