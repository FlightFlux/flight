<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Basic Boarding Pass Scanner</title>
  <link rel="stylesheet" href="styles.css">
  <!-- Include Zxing library for barcode scanning -->
  <script src="https://unpkg.com/@zxing/library@0.20.0/umd/index.min.js"></script>
</head>
<body>
  <div class="container">
    <header>
      <h1>Boarding Pass Scanner</h1>
      <p>Scan your boarding pass to extract flight details</p>
    </header>

    <div id="status-indicator" class="status ready">
      <span id="status-message">Ready to scan. Click the button below to start.</span>
    </div>

    <div id="camera-container" class="hidden">
      <div class="camera-view">
        <video id="video" playsinline autoplay></video>
        <div class="scan-overlay">
          <div class="scan-line"></div>
          <div class="corner top-left"></div>
          <div class="corner top-right"></div>
          <div class="corner bottom-left"></div>
          <div class="corner bottom-right"></div>
          <div class="instructions">Position barcode within frame</div>
        </div>
        <button id="close-camera" class="close-btn" aria-label="Close camera">√ó</button>
        <button id="toggle-flash" class="flash-btn hidden" aria-label="Toggle flashlight">üí°</button>
      </div>
    </div>

    <div id="manual-input-container" class="hidden">
      <h3>Enter Boarding Pass Data</h3>
      <p class="hint">Enter the text from your boarding pass barcode</p>
      <textarea id="manual-barcode-data" rows="5" placeholder="e.g. M1DESMARAIS/LUC       EABC123 YULFRAAC 0834 226F001A0025 100"></textarea>
      <div class="button-group">
        <button id="submit-manual" class="btn btn-primary">Submit</button>
        <button id="cancel-manual" class="btn btn-secondary">Cancel</button>
      </div>
    </div>

    <div id="result-container" class="hidden">
      <div class="flight-info">
        <h2>Flight Information</h2>
        
        <div class="passenger-section">
          <div class="label">Passenger</div>
          <div id="passenger-name" class="value">-</div>
        </div>
        
        <div class="flight-section">
          <div class="flight-route">
            <div class="origin">
              <div class="label">From</div>
              <div id="origin" class="airport-code">-</div>
            </div>
            <div class="flight-icon">‚úàÔ∏è</div>
            <div class="destination">
              <div class="label">To</div>
              <div id="destination" class="airport-code">-</div>
            </div>
          </div>
          
          <div class="flight-details">
            <div class="detail-item">
              <div class="label">Airline</div>
              <div id="airline" class="value">-</div>
            </div>
            <div class="detail-item">
              <div class="label">Flight</div>
              <div id="flight-number" class="value">-</div>
            </div>
            <div class="detail-item">
              <div class="label">Date</div>
              <div id="date" class="value">-</div>
            </div>
          </div>
        </div>
        
        <div class="boarding-section">
          <h3>Boarding Details</h3>
          <div class="boarding-details">
            <div class="detail-item">
              <div class="label">Seat</div>
              <div id="seat" class="value big">-</div>
            </div>
            <div class="detail-item">
              <div class="label">Class</div>
              <div id="class" class="value">-</div>
            </div>
            <div class="detail-item">
              <div class="label">PNR</div>
              <div id="pnr" class="value highlight">-</div>
            </div>
          </div>
          <div class="status-indicator">
            <div id="checked-in-status" class="status-dot"></div>
            <div id="checked-in-text" class="status-text">Not checked in</div>
          </div>
        </div>
      </div>
      
      <div id="debug-section" class="debug-section">
        <div class="debug-header">
          <h3>Technical Details</h3>
          <button id="toggle-debug" class="text-btn">Show Details</button>
        </div>
        <div id="debug-content" class="debug-content hidden">
          <div>
            <h4>Raw Barcode Data</h4>
            <pre id="raw-data" class="code-block"></pre>
          </div>
          <div>
            <h4>Field Breakdown</h4>
            <pre id="field-breakdown" class="code-block"></pre>
          </div>
        </div>
      </div>
      
      <div class="button-container">
        <button id="scan-again" class="btn btn-primary">Scan Another Boarding Pass</button>
      </div>
    </div>

    <div id="manual-toggle" class="text-center">
      <button id="show-manual-input" class="text-btn">Enter barcode manually</button>
    </div>

    <div id="action-button-container">
      <button id="start-scan" class="action-button">
        <span class="icon">üì∑</span>
        <span class="text">Scan Boarding Pass</span>
      </button>
    </div>

    <div id="error-modal" class="modal hidden">
      <div class="modal-content">
        <h3>Error</h3>
        <p id="error-message"></p>
        <button id="close-error" class="btn btn-primary">OK</button>
      </div>
    </div>
  </div>

  <div id="install-prompt" class="install-prompt hidden">
    <button id="close-install-prompt" class="close-install">√ó</button>
    <div class="install-content">
      <div class="install-icon">üì≤</div>
      <div class="install-text">
        <h3>Install App</h3>
        <p id="install-instructions">Install this app on your home screen for quick access when offline</p>
      </div>
      <button id="install-button" class="btn btn-install">Install</button>
    </div>
  </div>

  <script src="bcbp-parser.js"></script>
  <script src="app.js"></script>
</body>
</html>